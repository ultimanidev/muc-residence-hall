var Translator_DATA = { "en-us": { "Create":"Create", "Tooltips":"Tooltips", "OffInfo":"Off Info", "OffLink":"Off Link", "Chat":"Chat", "InitialView":"InitialView", }, "zh-CN" :{ "Create":"制作", "Tooltips":"提示", "OffInfo":"关信息", "OffLink":"关链接", "Chat":"聊天", "InitialView":"回始点", }, "fr-FR" :{ "Create":"Créer", "Tooltips":"Info-bulles", "OffInfo":"Hors Info", "OffLink":"Lien désactivé", "Chat":"Chat", "InitialView":"Vue initiale", } } function changeLanguage() { const languageSelect = document.getElementById('language-select'); const selectedLanguage = languageSelect.value; var createPanoSpan= document.getElementById('createPanoSpan'); var tooltipsSpan= document.getElementById('tooltipsSpan'); var offInfoSpan= document.getElementById('offInfoSpan'); var offLinkSpan= document.getElementById('offLinkSpan'); var chat_onlineSpan= document.getElementById('chat_onlineSpan'); var initialViewSpan= document.getElementById('initialViewSpan'); if (createPanoSpan) {createPanoSpan.textContent = translate("Create", selectedLanguage, "Create")}; if (tooltipsSpan) {tooltipsSpan.textContent = translate("Tooltips", selectedLanguage, "Tooltips")}; if (offInfoSpan) {offInfoSpan.textContent = translate("OffInfo", selectedLanguage, "OffInfo")}; if (offLinkSpan) {offLinkSpan.textContent = translate("OffLink", selectedLanguage, "OffLink")}; if (chat_onlineSpan) {chat_onlineSpan.textContent = translate("Chat", selectedLanguage, "Chat")}; if (initialViewSpan) {initialViewSpan.textContent = translate("InitialView", selectedLanguage, "InitialView")}; } function translate(keyword, culture, defaultText) { if (Translator_DATA[culture] && Translator_DATA[culture][keyword]) { return Translator_DATA[culture][keyword]; } else { return defaultText || keyword; } } function getLanguageFromQueryString() { var url = window.location.href; if (url.endsWith('#')) { url = url.slice(0, -1); } var urlParams = new URLSearchParams(url.split('?')[1]); const defaultLang = navigator.language || navigator.userLanguage || 'en-US'; if (urlParams.has('lang')) { var lang=urlParams.get('lang'); setTimeout(function() { var lang = urlParams.get('lang'); var allowedLangs = ['en-US', 'zh-CN']; if (allowedLangs.includes(lang)) { document.getElementById('language-select').value = lang; } else { document.getElementById('language-select').value = defaultLang; } }, 3000); return lang } else { setTimeout(function() { document.getElementById('language-select').value if (defaultLang==="en-US"||defaultLang==="zh-CN") document.getElementById('language-select').value=defaultLang; },3000); return defaultLang; } } userLang = getLanguageFromQueryString(); console.log('lang',userLang);